<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Roman Numerals – SVG Buttons</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    body{font-family:Arial,sans-serif;text-align:center;margin-top:40px;background:#f4f4f9;}
    #game-area{margin:30px auto;width:300px;height:300px;border:2px solid #ccc;border-radius:10px;
               display:flex;align-items:center;justify-content:center;background:#fff;position:relative;}
    #svg-container{width:100%;height:100%;}
    #feedback{white-space:nowrap;position:absolute;top:95%;left:50%;transform:translate(-50%,-50%);
              font-size:24px;font-weight:bold;display:none;z-index:10;pointer-events:none}
    .correct{color:green;}
    .incorrect{color:red;}

    #numbers{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));
             gap:10px;max-width:600px;margin:30px auto;padding:0 15px;}
    .num-btn{
        border:2px solid #333;border-radius:8px;
        background:#e0e0e0;cursor:pointer;display:flex;align-items:center;justify-content:center;
        transition:.2s;
    }
    .num-btn:hover{background:#d0d0d0;transform:scale(1.05);}
    .num-btn img{width:50px;height:50px;object-fit:contain;}

    #score{margin:20px;font-size:18px;}
    .score-item{display:inline-block;margin:0 20px;}
    .correct-score{color:green;}
    .incorrect-score{color:red;}
    #progress{margin:10px;font-size:14px;}
</style>
</head>
<body>
<div style="text-align:center;  margin:10px 20px 0 0;">
    <button class="num-btn-home" id="go-to"><b>go home</b></button>
</div>
<!-- <h1>Roman Numerals Practice (1-20)</h1> -->

<div id="score">
    <div class="score-item">Correct: <span id="correct-count" class="correct-score">0</span></div>
    <div class="score-item">Incorrect: <span id="incorrect-count" class="incorrect-score">0</span></div>
</div>

<p>Click on a structure in <font color="red">red</font> that corresponds to the fragment in question.</p>

<div id="game-area">
    <div id="svg-container"></div>
    <div id="feedback"></div>
</div>

<div id="numbers"></div>

<div id="progress">Unique SVGs used: <span id="used-count">0</span> / <span id="total-count">0</span></div>

<script>
/* --------------------------------------------------------------
   CONFIG
   -------------------------------------------------------------- */
const TOTAL_NUMBERS       = 20;
const ROMAN_FOLDER        = 'name-structure-svgs/';      // 1-a.svg … 20-c.svg
const BUTTON_FOLDER       = 'name-structure-buttons/';   // one.svg … twenty.svg
const DELAY_AFTER_CORRECT = 1000;

/* --------------------------------------------------------------
   1. ALL ROMAN SVG FILES (variants)
   -------------------------------------------------------------- */
const ALL_ROMAN_FILES = [];
for (let n = 1; n <= TOTAL_NUMBERS; n++) {
    ['a'].forEach(v => ALL_ROMAN_FILES.push(`${n}-${v}.svg`));
}

/* --------------------------------------------------------------
   2. RANDOM-PICK FROM REMAINING POOL
   -------------------------------------------------------------- */
let remainingRoman = [...ALL_ROMAN_FILES];
let usedRoman      = new Set();

function refillRoman() {
    if (remainingRoman.length === 0) {
        remainingRoman = [...ALL_ROMAN_FILES];
        usedRoman.clear();
        console.log('All 60 SVGs shown – reshuffling');
    }
}
function getNextRoman() {
    refillRoman();
    const i = Math.floor(Math.random() * remainingRoman.length);
    const file = remainingRoman.splice(i, 1)[0];
    usedRoman.add(file);
    updateProgress();
    return file;
}

/* --------------------------------------------------------------
   3. DOM & STATE
   -------------------------------------------------------------- */
const svgContainer   = document.getElementById('svg-container');
const feedback       = document.getElementById('feedback');
const numbersDiv     = document.getElementById('numbers');
const correctEl      = document.getElementById('correct-count');
const incorrectEl    = document.getElementById('incorrect-count');
const usedEl         = document.getElementById('used-count');
const totalEl        = document.getElementById('total-count');

totalEl.textContent = ALL_ROMAN_FILES.length;   // 60

let currentBaseNumber = null;
let correctCount = 0, incorrectCount = 0;
let timeoutId = null;

/* --------------------------------------------------------------
   4. CREATE ANSWER BUTTONS (tiny number SVGs)
   -------------------------------------------------------------- */
const numberWords = ['','one','two','three','four','five','six','seven','eight','nine','ten',
                     'eleven','twelve','thirteen','fourteen','fifteen','sixteen',
                     'seventeen','eighteen','nineteen','twenty'];

for (let i = 1; i <= TOTAL_NUMBERS; i++) {
    const btn = document.createElement('button');
    btn.className = 'num-btn';
    btn.dataset.value = i;

    const img = document.createElement('img');
    img.src = BUTTON_FOLDER + numberWords[i] + '.svg';
    img.alt = numberWords[i];
    btn.appendChild(img);

    btn.addEventListener('click', () => handleClick(i));
    numbersDiv.appendChild(btn);
}

/* progress */
function updateProgress() {
    usedEl.textContent = usedRoman.size;
}

document.getElementById('go-to').addEventListener('click', () => {
    window.location.href = 'index.html';
});

/* --------------------------------------------------------------
   5. SHOW NEXT ROMAN SVG
   -------------------------------------------------------------- */
function showNextRoman() {
    // svgContainer.innerHTML = '';
    feedback.style.display = 'none';
    if (timeoutId) clearTimeout(timeoutId);

    const filename = getNextRoman();
    const match = filename.match(/^(\d+)-/);
    currentBaseNumber = match ? Number(match[1]) : 1;

    const img = document.createElement('img');
    img.src = ROMAN_FOLDER + filename;
    img.alt = `Roman ${currentBaseNumber}`;
    img.style.width = '100%';
    img.style.height = '100%';
    img.style.objectFit = 'contain';
    img.onload  = () => {
        svgContainer.innerHTML = '';
        svgContainer.appendChild(img);
    }
    img.onerror = () => {
        svgContainer.innerHTML = `<p style="color:red;">${filename} missing</p>`;
    };
}

/* --------------------------------------------------------------
   6. CLICK HANDLER
   -------------------------------------------------------------- */
function handleClick(clicked) {
    if (currentBaseNumber === null) return;
    disableButtons(true);

    if (clicked === currentBaseNumber) {
        correctCount++; correctEl.textContent = correctCount;
        showFeedback('You’re right!', true);
        timeoutId = setTimeout(() => { showNextRoman(); enableButtons(); }, DELAY_AFTER_CORRECT);
    } else {
        incorrectCount++; incorrectEl.textContent = incorrectCount;
        showFeedback('You’re wrong!', false);
        setTimeout(() => { feedback.style.display = 'none'; enableButtons(); }, 1000);
    }
}
function showFeedback(txt, ok) {
    feedback.textContent = txt;
    feedback.className = ok ? 'correct' : 'incorrect';
    feedback.style.display = 'block';
}
function disableButtons(yes = true) {
    document.querySelectorAll('.num-btn').forEach(b => {
        b.disabled = yes;
        b.style.opacity = yes ? 0.5 : 1;
    });
}
function enableButtons() { disableButtons(false); }

/* --------------------------------------------------------------
   7. START
   -------------------------------------------------------------- */
showNextRoman();
</script>
</body>
</html>